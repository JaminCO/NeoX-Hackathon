# LianFlow Crypto Payment Gateway

Welcome to LianFlow, a next-generation cryptocurrency payment gateway powered by FastAPI and built around the NEO X blockchain. LianFlow empowers businesses to effortlessly accept and manage crypto payments with security and efficiency.

## Table of Contents
1. [Key Features](#key-features)
2. [Technology Stack](#technology-stack)
3. [Getting Started](#getting-started)
    - [Authentication](#authentication)
    - [API Keys](#api-keys)
4. [API Reference](#api-reference)
    - [Base URL](#base-url)
    - [Authentication Headers](#authentication-headers)
    - [Endpoints](#endpoints)
5. [Wallets](#wallets)
6. [Making Payments](#making-payments)
7. [Error Handling](#error-handling)
8. [Webhook Integration](#webhook-integration)
9. [Code Examples](#code-examples)
10. [Troubleshooting](#troubleshooting)
11. [Support](#support)

## Key Features

- **Business Account Management**: Streamlined processes for creating and managing business accounts
- **Wallet Operations**: Easy wallet creation and import for secure transactions
- **Seamless Payment Processing**: Efficient handling of payments with real-time monitoring
- **Instant Payment Updates**: Real-time status updates via WebSocket
- **Secure API Authentication**: Robust API key authentication
- **Proactive Webhook Notifications**: Instant notifications on payment status changes

## Technology Stack

- **FastAPI**: Modern, high-performance web framework for building APIs
- **SQLAlchemy**: Powerful ORM for database management
- **Web3.py**: Comprehensive blockchain interaction library
- **PostgreSQL/SQLite**: Reliable database solutions

## Getting Started


### Authentication

To begin using LianFlow, create an account by making a `POST` request to:
```
https://neox-hackathon.onrender.com/users/signup
```

### API Keys

There are two ways to obtain your API key:

1. **During Signup**: An API key is automatically provided after successful registration
2. **From Dashboard**: Navigate to Settings >> API Keys >> 'Generate new API Keys'

## API Reference

**[More Detailed API Reference for Developers](https://peaceful-rainforest-7cd.notion.site/API-Reference-for-Developers-1b6d8e83b03c46d7a57e643452536dd7#7ec7d0924b3a4728b44138b42472fe64)**

#

### Base URL
```
https://api.lianflow.com/v1
```

### Authentication Headers
```json
{
    "Authorization": "Bearer YOUR_API_KEY",
    "Content-Type": "application/json"
}
```

### Endpoints

#### 1. Create Payment
```http
POST /payment/create
```

Request Body:
```json
{
    "amount": float,
    "sender_address": "string",
    "data": "string",
    "webhook_url": "string"
}
```

Response:
```json
{
    "payment_id": "uuid",
    "merchant_address": "string"
}
```

#### 2. Get Payment Details
```http
GET /payment/{paymentId}
```

Response:
```json
{
    "payment_id": "string",
    "business_name": "string",
    "business_id": "string",
    "gas_amount": float,
    "total_amount": float
}
```

#### 3. Check Payment Status
```http
GET /payment/status/{paymentId}
```

#### 4. Get Transaction Details
```http
GET /transaction/{transactionId}
```

## Wallets

A wallet is automatically created upon signup. Access your wallet through the wallet section in your dashboard. The wallet enables you to:
- Securely manage cryptocurrency assets
- View transaction history
- Process payments
- Monitor balances

## Making Payments

To make a payment:
1. Ensure you have an active account
2. Use your autogenerated wallet
3. Supply required payment details
4. Monitor transaction status

## Error Handling

| HTTP Status Code | Description                    | Details                                    |
|-----------------|--------------------------------|--------------------------------------------|
| 200             | OK                             | Request successful                         |
| 401             | Not authorized                 | Authentication required                    |
| 422             | Validation error               | Invalid input supplied                     |
| 451             | Authentication error           | Invalid credentials                        |
| 404             | Not found                      | Endpoint doesn't exist                     |
| 500, 502, 504   | Server errors                  | Internal server issue                      |

Error response includes:
- `type`: Either 'auth_error' or 'validation_error'
- Detailed error message

## Webhook Integration

Receive real-time payment updates by specifying a webhook URL when creating payments.

Webhook Payload:
```json
{
    "receipt": object,
    "email": "string",
    "payment_id": "string",
    "status": "string",
    "amount": float,
    "sender": "string",
    "receiver": "string",
    "transaction_hash": "string",
    "user_id": "string",
    "gas_fee": float
}
```

## Code Examples

### Python
```python
import requests

API_KEY = "your_api_key"
BASE_URL = "https://api.lianflow.com/v1"

headers = {
    "Authorization": f"Bearer {API_KEY}",
    "Content-Type": "application/json"
}

# Create payment
payment_data = {
    "amount": 100.0,
    "sender_address": "sender_wallet_address",
    "data": "customer@email.com",
    "webhook_url": "https://your-website.com/webhook"
}

response = requests.post(
    f"{BASE_URL}/payment/create",
    headers=headers,
    json=payment_data
)

print(response.json())
```

### JavaScript
```javascript
const API_KEY = 'your_api_key';
const BASE_URL = 'https://api.lianflow.com/v1';

const headers = {
    'Authorization': `Bearer ${API_KEY}`,
    'Content-Type': 'application/json'
};

const paymentData = {
    amount: 100.0,
    sender_address: 'sender_wallet_address',
    data: 'customer@email.com',
    webhook_url: 'https://your-website.com/webhook'
};

fetch(`${BASE_URL}/payment/create`, {
    method: 'POST',
    headers: headers,
    body: JSON.stringify(paymentData)
})
.then(response => response.json())
.then(data => console.log(data))
.catch(error => console.error('Error:', error));
```

## Troubleshooting

Common issues and solutions:

1. **Authentication Errors (422)**:
   - Ensure all required fields are included
   - Use raw JSON format for request body
   - Verify API key is valid and properly formatted

2. **Payment Processing Issues**:
   - Verify sufficient balance
   - Check gas fees
   - Ensure correct wallet addresses

## Support

For technical support or questions:
- Email: jaminonuegbu@gmail.com

### Best Practices
1. Store API keys securely
2. Implement proper error handling
3. Monitor webhook endpoints
4. Keep integration up to date
5. Test thoroughly in development environment

### Note
To withdraw funds:
1. Go to DASHBOARD >> WALLET
2. Click the WITHDRAW Button in Quick Actions
3. Complete withdrawal process in Settings